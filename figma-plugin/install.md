# 🚀 Pandatalk Figma 插件安装指南

## 📋 前置要求

- Figma 桌面应用或 Figma 网页版
- 网络连接（用于与 Pandatalk 应用通信）
- 基本的 Figma 使用经验

## 🔧 安装步骤

### 步骤 1: 下载插件文件

确保你已经下载了完整的插件文件夹，包含以下文件：
- `manifest.json` - 插件配置文件
- `code.js` - 主要逻辑代码
- `ui.html` - 用户界面
- `config.js` - 配置文件
- `api-integration.js` - API 集成代码

### 步骤 2: 在 Figma 中安装插件

#### 方法 A: 开发模式安装（推荐用于测试）

1. 打开 Figma 应用
2. 点击菜单栏的 **Plugins** → **Development** → **New Plugin**
3. 选择 **Import plugin from manifest**
4. 浏览并选择插件目录中的 `manifest.json` 文件
5. 点击 **Import** 按钮
6. 插件将出现在 **Development** 插件列表中

#### 方法 B: 从文件安装

1. 打开 Figma 应用
2. 按 `Ctrl+Shift+P` (Windows) 或 `Cmd+Shift+P` (Mac) 打开命令面板
3. 输入 "Import plugin from manifest"
4. 选择插件目录中的 `manifest.json` 文件

### 步骤 3: 配置插件

1. 在 Figma 中，点击 **Plugins** → **Development** → **Pandatalk Integration**
2. 插件界面将打开
3. 首次使用时，需要配置以下信息：
   - API 密钥
   - 用户 ID
   - 目标聊天 ID

## ⚙️ 配置说明

### API 配置

在 `config.js` 文件中，你可以修改以下配置：

```javascript
api: {
  baseURL: 'https://api.pandatalk.com', // 你的 API 服务器地址
  endpoints: {
    shareDesign: '/api/v1/designs/share',
    // ... 其他端点
  }
}
```

### 用户认证

你需要提供以下信息来使用插件：

1. **API 密钥**: 从 Pandatalk 应用获取的访问令牌
2. **用户 ID**: 你的用户标识符
3. **聊天 ID**: 要分享设计的目标聊天 ID

## 🎯 使用方法

### 基本操作流程

1. **选择设计元素**
   - 在 Figma 画布中选择要分享的设计元素
   - 支持单个或多个元素

2. **启动插件**
   - 点击 **Plugins** → **Development** → **Pandatalk Integration**

3. **获取设计信息**
   - 点击插件界面中的 "获取选中元素" 按钮
   - 插件将分析选中的元素并显示信息

4. **添加分享消息**
   - 在文本框中输入分享说明（可选）
   - 支持中文和英文

5. **分享设计**
   - 点击 "分享到 Pandatalk" 按钮
   - 等待分享完成

### 支持的元素类型

- ✅ 矩形、圆形、多边形等形状
- ✅ 文本元素
- ✅ 框架和组件
- ✅ 图片和图标
- ✅ 布尔运算结果
- ✅ 矢量图形

## 🔍 故障排除

### 常见问题

#### 1. 插件无法启动
- 检查 `manifest.json` 文件是否完整
- 确认文件路径正确
- 重启 Figma 应用

#### 2. 无法获取选中元素
- 确保在画布中选择了元素
- 检查元素是否被锁定或隐藏
- 尝试重新选择元素

#### 3. 分享失败
- 检查网络连接
- 验证 API 配置信息
- 确认目标聊天 ID 有效

#### 4. 预览图生成失败
- 检查元素是否包含有效内容
- 尝试选择较小的区域
- 确认有足够的系统内存

### 调试模式

启用调试模式来获取更多信息：

1. 在 `config.js` 中设置：
```javascript
debug: {
  enabled: true,
  logLevel: 'debug'
}
```

2. 打开浏览器开发者工具查看控制台输出

## 📱 与 Pandatalk 应用集成

### 接收分享的设计

在 Pandatalk 应用中，分享的设计将显示为：

- **设计卡片**: 包含预览图和基本信息
- **消息内容**: 显示分享说明和设计名称
- **交互功能**: 点击可查看详细信息和评论

### 实时同步

- 设计分享后立即在聊天中显示
- 支持实时通知
- 可查看分享历史记录

## 🎨 自定义和扩展

### 修改界面样式

编辑 `ui.html` 文件中的 CSS 来：
- 更改颜色主题
- 调整布局和间距
- 添加自定义动画

### 添加新功能

在 `code.js` 中添加：
- 新的元素类型支持
- 批量分享功能
- 设计模板功能

### 集成其他服务

修改 `api-integration.js` 来：
- 支持多个聊天平台
- 添加云存储服务
- 集成版本控制系统

## 📞 获取帮助

### 官方支持

- 查看 [README.md](./README.md) 获取详细信息
- 检查 [配置说明](./config.js) 了解所有选项
- 参考 [API 集成示例](./api-integration.js)

### 社区支持

- 在 Figma 社区中搜索相关讨论
- 加入 Pandatalk 用户群组
- 提交 Issue 或功能请求

## 🔄 更新插件

### 手动更新

1. 下载新版本的插件文件
2. 替换现有文件
3. 在 Figma 中重新导入插件

### 自动更新

- 插件发布到 Figma 社区后支持自动更新
- 在插件管理页面检查更新

---

## 🎉 恭喜！

你已经成功安装了 Pandatalk Figma 集成插件！现在你可以：

- 直接在 Figma 中分享设计到聊天应用
- 与团队成员实时协作
- 保存设计分享历史
- 享受无缝的设计工作流程

如果遇到任何问题，请参考故障排除部分或联系技术支持。

**开始使用你的新插件吧！** 🚀✨

